# 本地校验器

一个基于Tauri的本地校验器，可以对导入的文本进行逐行校验，能够检测出文本中的错误并给出优化建议。

## 功能特点

- 🔍 **智能文本分析**：支持中英文文本的深度分析
- 📁 **多格式支持**：支持导入 .txt、.md、.docx、.doc 等格式文件
- 🎯 **精准定位**：点击问题可在编辑器中高亮对应文本位置
- 📊 **统计信息**：提供详细的文本统计（字符数、词数、行数）
- ⚡ **实时分析**：支持大文件异步分析，避免界面卡顿
- 🔧 **智能建议**：为每个检测到的问题提供具体的修改建议

## 错误检测功能

### 📝 拼写检查
- **英文拼写错误**：检测常见的英文单词拼写错误
  - 示例：`recieve` → `receive`，`definately` → `definitely`
- **拼写建议**：提供正确的拼写建议
- **专有名词识别**：自动跳过首字母大写的专有名词

### 🔤 重复检测
- **重复词语**：检测连续出现的相同词语
  - 示例：`这个 这个 问题` → `这个 问题`
- **重复字符**：检测中文重复字符（智能过滤正常用法）
  - 检测：`我我觉得` → `我觉得`
  - 不误报：`人人都知道`、`事事如意`等正常用法

### 🔣 标点符号
- **空括号**：检测多余的空括号
  - 示例：`calculation ()` → 删除空括号或添加内容
- **括号配对**：检测不配对的括号
  - 示例：`句子（缺少右括号` → 添加右括号
- **连续标点**：检测连续使用的相同标点符号
  - 示例：`什么？？？` → `什么？`
- **中英文标点混用**：检测同一行中混用中英文标点

### 📏 语法检查
- **被动语态**：检测过度使用的被动语态
  - 中文：`被`、`受到`、`遭到` 等标记
  - 英文：`is/are/was/were + 过去分词` 结构
- **主谓一致**：检测英文主谓不一致问题
- **时态一致性**：检测英文时态使用问题
- **中文语法**：
  - `的得地` 用法检测
  - `把` 字句结构检查

### 📐 文本结构
- **句子长度**：检测过长的句子
  - 建议：将长句拆分为多个短句提高可读性
- **段落结构**：分析文本的段落组织

### 🎨 写作风格
- **冗余表达**：检测常见的冗余词汇和表达
  - 示例：`目前现在` → `目前` 或 `现在`
- **非正式用词**：检测学术写作中的非正式表达
  - 示例：`咱们` → `我们`，`俺们` → `我们`
- **语序问题**：检测中文语序不当的表达

### 🌐 多语言支持
- **智能语言检测**：自动识别文本主要语言
- **中英文混合**：正确处理中英文混合的文本
- **编码支持**：支持 UTF-8、GBK、GB18030 等多种编码


## 如何使用

### 使用Cargo构建和运行

1. 确保已安装Rust和Cargo以及Node.js
   ```
   rustc --version
   cargo --version
   node --version
   npm --version
   ```

2. 克隆项目并进入项目目录
   ```
   cd Localcheck
   ```

3. 安装前端依赖
   ```
   npm install
   ```

4. 分别启动前端和后端

   启动前端开发服务器：
   ```
   npm run dev
   ```

   在另一个终端中，使用Cargo运行Tauri应用：
   ```
   cd src-tauri
   cargo run
   ```

5. 构建发布版本
   ```
   cd src-tauri
   cargo build --release
   ```

### 使用方法

1. **导入文本**
   - 点击"打开文件"按钮导入文本文件（支持 .txt、.md、.docx、.doc）
   - 或直接在编辑区输入/粘贴文本

2. **开始分析**
   - 点击"分析文本"按钮进行分析
   - 大文件会自动使用异步分析，避免界面卡顿

3. **查看结果**
   - 在右侧查看分析结果，包括：
     - 📊 文本统计信息（字符数、词数、行数）
     - 🔍 检测到的各类问题
     - 💡 针对性的修改建议

4. **问题定位**
   - 点击任意问题项可在编辑区高亮对应文本
   - 支持按问题类型筛选显示
   - 可以接受或忽略特定问题


## 支持的文件格式

| 格式 | 支持程度 | 说明 |
|------|----------|------|
| .txt | ✅ 完全支持 | 纯文本文件，支持多种编码 |
| .md | ✅ 完全支持 | Markdown 文件 |
| .docx | ✅ 完全支持 | Word 文档（Office Open XML） |
| .doc | ⚠️ 基本支持 | 旧版 Word 文档，基本文本提取 |

## 常见问题

### Q: 为什么某些正常用法被标记为错误？
A: 系统采用保守策略，可能会标记一些边界情况。您可以点击"忽略"按钮忽略这些问题。

### Q: 支持哪些语言？
A: 目前主要支持中文和英文，以及中英文混合文本。

### Q: 文件大小有限制吗？
A: 支持最大 5MB 的文件。超大文件会自动截取前面部分进行分析。

### Q: 数据会被上传到服务器吗？
A: 不会。所有分析都在本地进行，保护您的隐私安全。

## 开发指南

### 项目结构
```
LocalCheck/
├── src/                    # 前端源码 (React + TypeScript)
├── src-tauri/             # 后端源码 (Rust + Tauri)
│   ├── src/
│   │   ├── lib.rs         # 主要逻辑
│   │   ├── grammar_check.rs    # 语法检查
│   │   ├── improved_checker.rs # 改进的检查器
│   │   ├── spelling_dict.rs    # 拼写词典
│   │   └── document_parser.rs  # 文档解析
├── public/                # 静态资源
└── README.md
```

### 贡献指南

欢迎贡献代码！请遵循以下步骤：

1. **Fork 项目**
2. **创建功能分支**
   ```bash
   git checkout -b feature/new-feature
   ```
3. **提交更改**
   ```bash
   git commit -m "Add new feature"
   ```
4. **推送分支**
   ```bash
   git push origin feature/new-feature
   ```
5. **创建 Pull Request**